<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Тест | КОМПАНІЯ ППФ</title>
    <link rel="stylesheet" href="styles.css">
    
</head>
<body>
    <!-- Хедер -->
    <header>
        <div class="header-top">
            <div class="logo-container">
                <img src="img/logo.png" alt="Логотип" class="logo">
                <div class="logo-text">
                    <div class="company-name">КОМПАНІЯ ППФ</div>
                    <div class="company-desc">ПОКРІВЛЯ & ФАСАД</div>
                </div>
            </div>
            <div class="header-title">Клінкерні панелі</div>
        </div>

        <div class="header-bottom">
            <nav>
                <a href="index.html" class="active">Тест</a>
                <a href="statistic.html">Статистика</a>
            </nav>
            <button id="refresh">Оновити</button>
        </div>
    </header>

    <!-- Лента прогресса -->
    <div class="progress-bar">
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
    </div>

    

    <!-- Блок с тестом -->
    <div id="question-container">
        <h2 id="question-text">1. Що таке "точка роси"?</h2>

        <div class="answers">
            
            <label class="answer">
                <input type="radio" name="answer" value="A">
                A) Температура, при якій починає замерзати вода
            </label>
            <label class="answer">
                <input type="radio" name="answer" value="B">
                B) Температура, при якій водяна пара конденсується у рідину
            </label>
            <label class="answer">
                <input type="radio" name="answer" value="C">
                Г) Температура, при якій водяна пара конденсується у рідину
            </label>
            <label class="answer">
                <input type="radio" name="answer" value="D">
                Д) Температура, при якій водяна пара конденсується у рідину
            </label>
            
        </div>
    </div>

    <!-- Кнопки навигации -->
    <div class="buttons">
        <button id="prev">Попереднє</button>
        <button id="next">Наступне</button>
    </div>

    <div id="explanation-container" style="display: none;">
        <p id="explanation-text"></p>
    </div>
    
    
    <script>
// Массив вопросов
const questions = [
    {
        text: "Що таке \"точка роси\"?",
        answers: [
            { text: "Температура, при якій починає замерзати вода", correct: false },
            { text: "Температура, при якій водяна пара конденсується у рідину", correct: true },
            { text: "Температура, при якій повітря стає абсолютно сухим", correct: false },
            { text: "Температура, при якій вода перестає випаровуватися", correct: false }
        ],
        explanation: "Точка роси — це температура, при якій водяна пара, що міститься в повітрі, починає конденсуватися у рідину. Це відбувається, коли температура повітря знижується до певного рівня, і водяна пара більше не може залишатися в газоподібному стані, перетворюючись на краплі води або навіть на лід (залежно від температури). Тому правильна відповідь — Температура, при якій водяна пара конденсується у рідину."
    },
    {
        text: "Який із наведених матеріалів є екструдованим утеплювачем?",
        answers: [
            { text: "Мінеральна вата", correct: false },
            { text: "Білий пінопласт", correct: false },
            { text: "Спінений графітовий пінопласт", correct: false },
            { text: "Екструдований пінополістирол (XPS)", correct: true }
        ],
        explanation: "Екструдований утеплювач — це матеріал, який виготовляється за допомогою екструзії, тобто процесу, коли пластична маса формується через спеціальну форму під високим тиском. Екструдований пінополістирол (XPS) є саме таким матеріалом, що має закриті осередки, які роблять його водонепроникним і ефективним утеплювачем. Тому правильна відповідь — Екструдований пінополістирол (XPS)."
    },
    {
    text: "Що впливає на адгезію матеріалу?",
    answers: [
        { text: "Температура та вологість повітря", correct: false },
        { text: "Чистота та структура поверхні", correct: false },
        { text: "Тип і якість клею", correct: false },
        { text: "Усі перелічені фактори", correct: true }
    ],
    explanation: "Адгезія — це здатність матеріалу прилипати або зчіплюватися з іншою поверхнею. На адгезію впливають кілька факторів: температура і вологість повітря, чистота і структура поверхні, а також тип і якість клею. Тому правильна відповідь — Усі перелічені фактори."
    },
    {
        text: "Які з наведених матеріалів є різновидами клінкерної плитки?",
        answers: [
            { text: "Paradyz", correct: false },
            { text: "Cerrad", correct: false },
            { text: "King Klinker", correct: false },
            { text: "Всі перелічені", correct: true }
        ],
        explanation: "Клінкерна плитка виготовляється за допомогою спеціальної технології, і всі перелічені бренди — це різновиди клінкерної плитки, яка відома своєю високою міцністю і довговічністю. Тому правильна відповідь — Всі перелічені."
    },
    {
        text: "Який утеплювач найкраще підходить для фасадних панелей завдяки низькому водопоглинанню?",
        answers: [
            { text: "Мінеральна вата", correct: false },
            { text: "Білий пінопласт", correct: false },
            { text: "Екструдований пінополістирол", correct: true },
            { text: "Деревне волокно", correct: false }
        ],
        explanation: "Екструдований пінополістирол (XPS) має низьке водопоглинання, що робить його ідеальним для використання в фасадних панелях, де важливо уникати впливу вологи. Тому правильна відповідь — Екструдований пінополістирол."
    },
    {
        text: "Чим відрізняється графітовий пінополістирол від білого?",
        answers: [
            { text: "Менша щільність", correct: false },
            { text: "Вища теплопровідність", correct: false },
            { text: "Кращі теплоізоляційні властивості", correct: true },
            { text: "Гірша адгезія", correct: false }
        ],
        explanation: "Графітовий пінополістирол має кращі теплоізоляційні властивості завдяки додаванню графітових часток, які знижують теплопровідність матеріалу. Тому правильна відповідь — Кращі теплоізоляційні властивості."
    },
    {
        text: "Яка максимальна товщина утеплювача у фасадних панелях?",
        answers: [
            { text: "50 мм", correct: false },
            { text: "100 мм", correct: false },
            { text: "120 мм", correct: false },
            { text: "150 мм", correct: true }
        ],
        explanation: "Максимальна товщина утеплювача у фасадних панелях зазвичай не перевищує 150 мм для забезпечення оптимальних теплоізоляційних властивостей і легкості монтажу. Тому правильна відповідь — 150 мм."
    },
    {
        text: "Що таке коефіцієнт теплопровідності?",
        answers: [
            { text: "Швидкість нагріву матеріалу", correct: false },
            { text: "Величина, що показує, як добре матеріал проводить тепло", correct: true },
            { text: "Величина, що характеризує паропроникність", correct: false },
            { text: "Показник морозостійкості матеріалу", correct: false }
        ],
        explanation: "Коефіцієнт теплопровідності — це величина, що показує, як добре матеріал проводить тепло. Чим менший цей коефіцієнт, тим кращі теплоізоляційні властивості матеріалу. Тому правильна відповідь — Величина, що показує, як добре матеріал проводить тепло."
    },
    {
        text: "Який матеріал має найнижчу паропроникність?",
        answers: [
            { text: "Мінеральна вата", correct: false },
            { text: "Білий пінопласт", correct: false },
            { text: "Графітовий пінополістирол", correct: false },
            { text: "Екструдований пінополістирол", correct: true }
        ],
        explanation: "Екструдований пінополістирол має найнижчу паропроникність серед зазначених матеріалів, що робить його відмінним вибором для фасадних панелей, де важлива герметичність і захист від вологи. Тому правильна відповідь — Екструдований пінополістирол."
    },
    {
        text: "Який матеріал використовується для кріплення термопанелей до стіни?",
        answers: [
            { text: "Цементний розчин", correct: false },
            { text: "Дюбелі та клей", correct: true },
            { text: "Саморізи", correct: false },
            { text: "Монтажна піна", correct: false }
        ],
        explanation: "Для кріплення термопанелей до стіни використовують комбінацію дюбелів та клею, що забезпечує надійне з'єднання панелей з поверхнею. Тому правильна відповідь — Дюбелі та клей."
    },
    {
        text: "Яка оптимальна температура для проведення монтажу термопанелей?",
        answers: [
            { text: "-5°C", correct: false },
            { text: "0°C", correct: false },
            { text: "+5°C", correct: true },
            { text: "+10°C", correct: false }
        ],
        explanation: "Оптимальна температура для монтажу термопанелей складає близько +5°C, щоб забезпечити хорошу адгезію клею і стабільність матеріалів. Тому правильна відповідь — +5°C."
    },
    {
        text: "Скільки закладних елементів використовується для монтажу однієї панелі?",
        answers: [
            { text: "3", correct: false },
            { text: "5", correct: true },
            { text: "7", correct: false },
            { text: "10", correct: false }
        ],
        explanation: "Зазвичай для монтажу однієї термопанелі використовують 5 закладних елементів, що дозволяє забезпечити надійне кріплення. Тому правильна відповідь — 5."
    },
    {
        text: "Як правильно готувати основу перед монтажем панелей?",
        answers: [
            { text: "Очистити від пилу та забруднень", correct: false },
            { text: "Нанести ґрунтовку", correct: false },
            { text: "Вирівняти поверхню", correct: false },
            { text: "Усі перелічені дії", correct: true }
        ],
        explanation: "Перед монтажем панелей потрібно очистити поверхню від пилу та забруднень, вирівняти її і нанести ґрунтовку, щоб забезпечити хорошу адгезію та стабільність. Тому правильна відповідь — Усі перелічені дії."
    },
    {
        text: "Який інструмент використовується для нарізки термопанелей?",
        answers: [
            { text: "Болгарка", correct: true },
            { text: "Канцелярський ніж", correct: false },
            { text: "Пила по металу", correct: false },
            { text: "Ручний рубанок", correct: false }
        ],
        explanation: "Для нарізки термопанелей зазвичай використовують болгарку, оскільки вона дозволяє здійснювати точні та швидкі розрізи матеріалу. Тому правильна відповідь — Болгарка."
    },
    {
        text: "Чим слід обробляти стики між панелями для герметизації?",
        answers: [
            { text: "Монтажною піною", correct: true },
            { text: "Силіконовим герметиком", correct: false },
            { text: "Клеєм для плитки", correct: false },
            { text: "Нічим", correct: false }
        ],
        explanation: "Для герметизації стиків між панелями найкраще використовувати монтажну піну, яка забезпечить хорошу ізоляцію і міцне з'єднання. Тому правильна відповідь — Монтажною піною."
    },
    {
        text: "Як визначити правильне розташування першої панелі?",
        answers: [
            { text: "Використати рівень", correct: true },
            { text: "Візуально оцінити", correct: false },
            { text: "Орієнтуватися на сусідні панелі", correct: false },
            { text: "Встановити 'на око'", correct: false }
        ],
        explanation: "Правильне розташування першої панелі визначається за допомогою рівня, щоб забезпечити правильне вирівнювання і точність монтажу всіх наступних панелей. Тому правильна відповідь — Використати рівень."
    },
    {
        text: "Чим кріпляться панелі до утеплювача?",
        answers: [
            { text: "Саморізами", correct: false },
            { text: "Клейовим розчином", correct: false },
            { text: "Дюбелями", correct: true },
            { text: "Будівельними скобами", correct: false }
        ],
        explanation: "Панелі кріпляться до утеплювача за допомогою дюбелів, що забезпечує надійне і стійке з'єднання. Тому правильна відповідь — Дюбелями."
    }
];

// Функция для случайного выбора 12 вопросов
function getRandomQuestions() {
    const shuffledQuestions = shuffleArray([...questions]);
    return shuffledQuestions.slice(0, 12); // Возвращаем только первые 12 вопросов
}

// Перемешиваем ответы
function shuffleArray(array) {
    return array.sort(() => Math.random() - 0.5);
}

let currentQuestionIndex = 0;
let userAnswers = new Array(12).fill(null); // Обновляем размер массива под 12 вопросов

// Получаем случайные 12 вопросов
const selectedQuestions = getRandomQuestions();

// Перемешиваем ответы для всех вопросов
selectedQuestions.forEach(question => {
    question.shuffledAnswers = shuffleArray([...question.answers]);
});

const questionText = document.getElementById("question-text");
const answersContainer = document.querySelector(".answers");
const progressItems = document.querySelectorAll(".progress-item");

// Загрузка вопроса
function loadQuestion() {
    let question = selectedQuestions[currentQuestionIndex];
    if (!question) return;

    const explanationContainer = document.getElementById("explanation-container");
    explanationContainer.style.display = "none"; // Скрываем блок с объяснением

    questionText.textContent = `${currentQuestionIndex + 1}. ${question.text}`;
    answersContainer.innerHTML = ""; // Очищаем контейнер с ответами

    let shuffledCurrentAnswers = question.shuffledAnswers;

    shuffledCurrentAnswers.forEach((answer, index) => {
        const label = document.createElement("label");
        label.classList.add("answer");

        const input = document.createElement("input");
        input.type = "radio";
        input.name = `answer-${currentQuestionIndex}`; // Уникальное имя для каждого вопроса
        input.value = index;
        input.dataset.correct = answer.correct; // Сохраняем правильность ответа

        if (userAnswers[currentQuestionIndex] === index) {
            input.checked = true;
            input.disabled = true; // Блокируем радиокнопку
        }

        input.addEventListener("change", () => {
            if (userAnswers[currentQuestionIndex] === null) {
                userAnswers[currentQuestionIndex] = index;
                applyAnswerStyles(currentQuestionIndex);
                updateProgress();

                const answerInputs = document.querySelectorAll(`input[name="answer-${currentQuestionIndex}"]`);
                answerInputs.forEach(input => {
                    input.disabled = true; // Блокируем радиокнопки
                });
            }
        });

        label.appendChild(input);
        label.appendChild(document.createTextNode(answer.text));

        answersContainer.appendChild(label);
    });

    applyAnswerStyles(currentQuestionIndex);
    disablePreviousQuestions();
    updateProgress();
}

function disablePreviousQuestions() {
    selectedQuestions.forEach((question, index) => {
        if (userAnswers[index] !== null) {
            const answerInputs = document.querySelectorAll(`input[name="answer-${index}"]`);
            answerInputs.forEach(input => {
                input.disabled = true;
            });
        }
    });
}

function applyAnswerStyles(questionIndex) {
    const question = selectedQuestions[questionIndex];
    const correctIndex = question.shuffledAnswers.findIndex(answer => answer.correct);
    const answerInputs = document.querySelectorAll(`input[name="answer-${questionIndex}"]`);
    const explanationContainer = document.getElementById("explanation-container");
    const explanationText = document.getElementById("explanation-text");

    answerInputs.forEach((input, index) => {
        input.classList.remove("correct", "incorrect");

        if (userAnswers[questionIndex] !== null) {
            const isCorrect = input.dataset.correct === "true";
            if (input.checked) {
                input.classList.add(isCorrect ? "correct" : "incorrect");

                if (isCorrect) {
                    explanationText.textContent = question.explanation;
                } else {
                    explanationText.textContent = "Неправильна відповідь. " + question.explanation;
                }

                explanationContainer.style.display = "block";
            }
        }
    });
}

function updateProgress() {
    progressItems.forEach((item, index) => {
        const isAnswered = userAnswers[index] !== null;
        const isCorrect = isAnswered && selectedQuestions[index]?.shuffledAnswers[userAnswers[index]]?.correct;

        item.classList.remove("active", "correct", "incorrect");
        item.style.height = '10px';

        if (index === currentQuestionIndex) {
            item.classList.add("active");
            item.style.height = '15px';
        }

        if (isAnswered) {
            if (isCorrect) {
                item.classList.add("correct");
            } else {
                item.classList.add("incorrect");
            }
        }
    });
}

loadQuestion();

document.getElementById("prev").addEventListener("click", () => {
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        loadQuestion();
    }
});

document.getElementById("next").addEventListener("click", () => {
    if (currentQuestionIndex < selectedQuestions.length - 1) {
        currentQuestionIndex++;
        loadQuestion();
    } else {
        finishTest(); // Завершаем тест, если это последний вопрос
    }
});

// Функция для завершения теста
function finishTest() {
    let correctAnswers = 0;
    const answersData = selectedQuestions.map((q, i) => {
        const correctAnswerIndex = q.shuffledAnswers.findIndex(answer => answer.correct);
        const userAnswer = userAnswers[i];

        // Подсчитываем правильные и неправильные ответы для каждого вопроса
        const correctAnswersCount = userAnswer === correctAnswerIndex ? 1 : 0;
        const incorrectAnswersCount = userAnswer !== correctAnswerIndex ? 1 : 0;
        
        // Подсчитываем общее количество правильных ответов
        correctAnswers += correctAnswersCount;

        // Добавляем данные по каждому вопросу
        return {
            question: q.text,
            correctAnswers: correctAnswersCount,
            incorrectAnswers: incorrectAnswersCount,
            totalAnswers: q.shuffledAnswers.length
        };
    });

    // Сохраняем общую статистику
    const totalQuestions = selectedQuestions.length;
    const knowledgePercent = (correctAnswers / totalQuestions) * 100;

    // Сохраняем статистику в localStorage
    localStorage.setItem('answersData', JSON.stringify(answersData));
    localStorage.setItem('totalCorrectAnswers', correctAnswers);
    localStorage.setItem('totalQuestions', totalQuestions);
    localStorage.setItem('knowledgePercent', knowledgePercent);

    // Переходим на страницу статистики
    window.location.href = 'statistic.html'; // Переход на страницу статистики
}



document.getElementById("refresh").addEventListener("click", () => {
    const newQuestions = getRandomQuestions();
    selectedQuestions.length = 0;
    selectedQuestions.push(...newQuestions);

    selectedQuestions.forEach(question => {
        question.shuffledAnswers = shuffleArray([...question.answers]);
    });

    currentQuestionIndex = 0;
    userAnswers = new Array(12).fill(null);
    loadQuestion();
});

// Функция для сохранения статистики ответа
function saveAnswerStatistics(question, isCorrect) {
    // Получаем текущие данные из localStorage
    const currentData = JSON.parse(localStorage.getItem("answersData")) || [];

    // Ищем, есть ли уже запись для этого вопроса
    const existingQuestion = currentData.find(data => data.question === question);

    if (existingQuestion) {
        // Если вопрос уже есть в статистике, обновляем данные
        existingQuestion.totalAttempts += 1;
        if (isCorrect) {
            existingQuestion.correctAnswers += 1;
        } else {
            existingQuestion.incorrectAnswers += 1;
        }
    } else {
        // Если вопроса нет в статистике, добавляем новый
        currentData.push({
            question: question,
            correctAnswers: isCorrect ? 1 : 0,
            incorrectAnswers: isCorrect ? 0 : 1,
            totalAttempts: 1
        });
    }

    // Сохраняем обновленные данные в localStorage
    localStorage.setItem("answersData", JSON.stringify(currentData));
}

// Функция завершения теста
function finishTest() {
    let correctAnswers = 0;
    const answersData = selectedQuestions.map((q, i) => {
        const correctAnswerIndex = q.shuffledAnswers.findIndex(answer => answer.correct);
        const userAnswer = userAnswers[i];

        const isCorrect = userAnswer === correctAnswerIndex;
        if (isCorrect) correctAnswers++;

        // Сохраняем статистику в localStorage
        saveAnswerStatistics(q.text, isCorrect);

        return {
            question: q.text,
            correctAnswers: isCorrect ? 1 : 0,
            incorrectAnswers: isCorrect ? 0 : 1,
            totalAttempts: 1
        };
    });

    // Записываем общий процент знаний
    const totalQuestions = selectedQuestions.length;
    const knowledgePercent = Math.round((correctAnswers / totalQuestions) * 100);

    localStorage.setItem('totalCorrectAnswers', correctAnswers);
    localStorage.setItem('totalQuestions', totalQuestions);
    localStorage.setItem('knowledgePercent', knowledgePercent);

    // Переход на страницу статистики
    window.location.href = 'statistic.html';
}

// Очищаем только текущие ответы пользователя, но не статистику
document.getElementById("refresh").addEventListener("click", () => {
    currentQuestionIndex = 0;
    userAnswers = new Array(12).fill(null);
    loadQuestion();
});

</script>
<script src="telegram.js"></script>
    
    
    
</body>
</html>
