<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Тест | КОМПАНІЯ ППФ</title>
    <link rel="stylesheet" href="styles.css">
    
</head>
<body>
    <!-- Хедер -->
    <header>
        <div class="header-top">
            <div class="logo-container">
                <img src="img/logo.png" alt="Логотип" class="logo">
                <div class="logo-text">
                    <div class="company-name">КОМПАНІЯ ППФ</div>
                    <div class="company-desc">ПОКРІВЛЯ & ФАСАД</div>
                </div>
            </div>
            <div class="header-title">Клінкерні панелі</div>
        </div>

        <div class="header-bottom">
            <nav>
                <a href="index.html" class="active">Тест</a>
                <a href="statistic.html">Статистика</a>
            </nav>
            <button id="refresh">Оновити</button>
        </div>
    </header>

    <!-- Лента прогресса -->
    <div class="progress-bar">
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
        <div class="progress-item"></div>
    </div>

    

    <!-- Блок с тестом -->
    <div id="question-container">
        <h2 id="question-text">1. Що таке "точка роси"?</h2>

        <div class="answers">
            
            <label class="answer">
                <input type="radio" name="answer" value="A">
                A) Температура, при якій починає замерзати вода
            </label>
            <label class="answer">
                <input type="radio" name="answer" value="B">
                B) Температура, при якій водяна пара конденсується у рідину
            </label>
            <label class="answer">
                <input type="radio" name="answer" value="C">
                Г) Температура, при якій водяна пара конденсується у рідину
            </label>
            <label class="answer">
                <input type="radio" name="answer" value="D">
                Д) Температура, при якій водяна пара конденсується у рідину
            </label>
            
        </div>
    </div>

    <!-- Кнопки навигации -->
    <div class="buttons">
        <button id="prev">Попереднє</button>
        <button id="next">Наступне</button>
    </div>

    <div id="explanation-container" style="display: none;">
        <p id="explanation-text"></p>
    </div>
    
    
    <script>
// Массив вопросов
const questions = [
    {
        "text": "Що таке 'точка роси'?",
        "answers": [
            { "text": "Температура, при якій починає замерзати вода", "correct": false },
            { "text": "Температура, при якій водяна пара конденсується у рідину", "correct": true },
            { "text": "Температура, при якій матеріал втрачає свої властивості", "correct": false },
            { "text": "Температура плавлення утеплювача", "correct": false }
        ],
        "explanation": "Точка роси – це температура, при якій водяна пара, що міститься в повітрі, досягає насичення та конденсується в рідину."
    },
    {
        "text": "Який із наведених матеріалів є екструдованим утеплювачем?",
        "answers": [
            { "text": "Мінеральна вата", "correct": false },
            { "text": "Білий пінопласт", "correct": false },
            { "text": "Спінений графітовий пінопласт", "correct": false },
            { "text": "Екструдований пінополістирол (XPS)", "correct": true }
        ],
        "explanation": "Екструдований пінополістирол (XPS) отримують шляхом екструзії, що надає йому високу міцність і низьке водопоглинання."
    },
    {
        "text": "Яка основна функція утеплювача у фасадних панелях?",
        "answers": [
            { "text": "Декоративна", "correct": false },
            { "text": "Теплоізоляційна", "correct": true },
            { "text": "Звукоізоляційна", "correct": false },
            { "text": "Захист від вологи", "correct": false }
        ],
        "explanation": "Основна функція утеплювача – зменшення тепловтрат будівлі, що підвищує енергоефективність."
    },
    {
        "text": "Що впливає на адгезію матеріалу?",
        "answers": [
            { "text": "Температура та вологість повітря", "correct": false },
            { "text": "Чистота та структура поверхні", "correct": false },
            { "text": "Тип і якість клею", "correct": false },
            { "text": "Усі перелічені фактори", "correct": true }
        ],
        "explanation": "Адгезія залежить від багатьох факторів: температура та вологість, чистота поверхні, та якість клею."
    },
    {
        "text": "Який утеплювач найкраще підходить для фасадних панелей завдяки низькому водопоглинанню?",
        "answers": [
            { "text": "Мінеральна вата", "correct": false },
            { "text": "Білий пінопласт", "correct": false },
            { "text": "Екструдований пінополістирол", "correct": true },
            { "text": "Деревне волокно", "correct": false }
        ],
        "explanation": "Екструдований пінополістирол (XPS) має дуже низьке водопоглинання, що робить його ідеальним для використання у фасадних системах."
    },
    {
        "text": "Чим відрізняється графітовий пінополістирол від білого?",
        "answers": [
            { "text": "Менша щільність", "correct": false },
            { "text": "Вища теплопровідність", "correct": false },
            { "text": "Кращі теплоізоляційні властивості", "correct": true },
            { "text": "Гірша адгезія", "correct": false }
        ],
        "explanation": "Графітовий пінополістирол має додані графітові частинки, що покращують його теплоізоляційні характеристики."
    },
    {
        "text": "Яка максимальна товщина утеплювача у фасадних панелях?",
        "answers": [
            { "text": "50 мм", "correct": false },
            { "text": "100 мм", "correct": false },
            { "text": "150 мм", "correct": false },
            { "text": "250 мм", "correct": true }
        ],
        "explanation": "Залежно від вимог до енергоефективності, утеплювач у фасадних панелях може досягати товщини 250 мм."
    },
    {
        "text": "Що таке коефіцієнт теплопровідності?",
        "answers": [
            { "text": "Швидкість нагріву матеріалу", "correct": false },
            { "text": "Величина, що показує, як добре матеріал проводить тепло", "correct": true },
            { "text": "Величина, що характеризує паропроникність", "correct": false },
            { "text": "Показник морозостійкості матеріалу", "correct": false }
        ],
        "explanation": "Коефіцієнт теплопровідності показує, наскільки добре матеріал проводить тепло. Чим нижчий цей показник, тим краще матеріал утримує тепло."
    },
    {
        "text": "Який матеріал має найнижчу паропроникність?",
        "answers": [
            { "text": "Мінеральна вата", "correct": false },
            { "text": "Білий пінопласт", "correct": false },
            { "text": "Графітовий пінополістирол", "correct": false },
            { "text": "Екструдований пінополістирол", "correct": true }
        ],
        "explanation": "Екструдований пінополістирол (XPS) має найнижчу паропроникність серед утеплювачів."
    },
    {
        "text": "Яка оптимальна температура для проведення монтажу термопанелей?",
        "answers": [
            { "text": "-5°C", "correct": false },
            { "text": "0°C", "correct": false },
            { "text": "+5°C", "correct": true },
            { "text": "-10°C", "correct": false }
        ],
        "explanation": "Оптимальна температура для монтажу термопанелей — це +5°C, оскільки при цьому температура не надто низька, і матеріали добре тримають адгезію."
    },
    {
        "text": "Скільки закладних елементів використовується для монтажу однієї панелі?",
        "answers": [
            { "text": "3", "correct": false },
            { "text": "5", "correct": true },
            { "text": "7", "correct": false },
            { "text": "10", "correct": false }
        ],
        "explanation": "Зазвичай для монтажу однієї термопанелі використовують 5 закладних елементів для надійного кріплення."
    },
    {
        "text": "Як правильно готувати основу перед монтажем панелей?",
        "answers": [
            { "text": "Очистити від пилу та забруднень", "correct": false },
            { "text": "Нанести ґрунтовку", "correct": false },
            { "text": "Вирівняти поверхню", "correct": false },
            { "text": "Усі перелічені дії", "correct": true }
        ],
        "explanation": "Перед монтажем термопанелей потрібно очистити основу від пилу, забруднень, вирівняти її та нанести ґрунтовку для забезпечення надійної адгезії."
    },
    {
        "text": "Який інструмент використовується для нарізки термопанелей?",
        "answers": [
            { "text": "Болгарка", "correct": true },
            { "text": "Канцелярський ніж", "correct": false },
            { "text": "Пила по металу", "correct": false },
            { "text": "Ручний рубанок", "correct": false }
        ],
        "explanation": "Для нарізки термопанелей найчастіше використовують болгарку, оскільки вона дозволяє швидко та точно розрізати матеріал."
    },
    {
        "text": "Чим слід обробляти стики між панелями для герметизації?",
        "answers": [
            { "text": "Монтажною піною", "correct": true },
            { "text": "Силіконовим герметиком", "correct": false },
            { "text": "Клеєм для плитки", "correct": false },
            { "text": "Нічим", "correct": false }
        ],
        "explanation": "Для герметизації стиків між панелями зазвичай використовують монтажну піну, яка заповнює зазори та забезпечує герметичність."
    },
    {
        "text": "Як визначити правильне розташування першої панелі?",
        "answers": [
            { "text": "Використати рівень", "correct": true },
            { "text": "Візуально оцінити", "correct": false },
            { "text": "Орієнтуватися на сусідні панелі", "correct": false },
            { "text": "Встановити 'на око'", "correct": false }
        ],
        "explanation": "Перша панель повинна бути встановлена рівно, тому для її розташування необхідно використовувати рівень."
    },
    {
        "text": "Який основний матеріал використовується для затирки швів клінкерної плитки?",
        "answers": [
            { "text": "Цементна затирка", "correct": true },
            { "text": "Гіпсова шпаклівка", "correct": false },
            { "text": "Силіконовий герметик", "correct": false },
            { "text": "Поліуретановий клей", "correct": false }
        ],
        "explanation": "Для затирки швів клінкерної плитки використовується цементна затирка, яка забезпечує надійну герметизацію швів."
    },
    {
        "text": "Як правильно наносити затирку?",
        "answers": [
            { "text": "Заповнювати шви шпателем", "correct": false },
            { "text": "Кельмою", "correct": true },
            { "text": "Наносити пензлем", "correct": false },
            { "text": "Заливати суміш у шви", "correct": false }
        ],
        "explanation": "Затирку найкраще наносити кельмою, оскільки цей інструмент дозволяє рівномірно заповнити шви."
    },
    {
        "text": "Що означає показник циклів морозостійкості?",
        "answers": [
            { "text": "Кількість змінних температур, які матеріал витримує без руйнування", "correct": true },
            { "text": "Максимальна температура нагріву", "correct": false },
            { "text": "Оптимальна температура експлуатації", "correct": false },
            { "text": "Швидкість поглинання вологи", "correct": false }
        ],
        "explanation": "Показник циклів морозостійкості вказує на кількість циклів заморожування та відтавання, які матеріал може витримати без пошкоджень."
    },
    {
        "text": "Який параметр найбільше впливає на довговічність фасадних панелей?",
        "answers": [
            { "text": "Вибір матеріалу", "correct": false },
            { "text": "Якість монтажу", "correct": false },
            { "text": "Експлуатаційні умови", "correct": false },
            { "text": "Всі перелічені фактори", "correct": true }
        ],
        "explanation": "Довговічність фасадних панелей залежить від вибору матеріалу, якості монтажу та умов експлуатації."
    },
    {
        "text": "Який тип клею використовується для приклеювання фасадних панелей?",
        "answers": [
            { "text": "Гіпсовий клей", "correct": false },
            { "text": "Поліуретановий клей", "correct": true },
            { "text": "Цементно-полімерний клей", "correct": false },
            { "text": "Акриловий клей", "correct": false }
        ],
        "explanation": "Для приклеювання фасадних панелей використовується поліуретановий клей, який забезпечує високу адгезію та стійкість до вологи."
    },
    {
        "text": "Який фактор слід враховувати при виборі товщини утеплювача?",
        "answers": [
            { "text": "Кліматичні умови регіону", "correct": false },
            { "text": "Товщину стін будинку", "correct": false },
            { "text": "Усі перелічені фактори", "correct": true }
        ],
        "explanation": "При виборі товщини утеплювача враховуються всі ці фактори, оскільки вони впливають на ефективність теплоізоляції."
    },
    {
        "text": "Яке основне призначення дюбелів у системах утеплення фасаду?",
        "answers": [
            { "text": "Закріплення плит утеплювача до основи", "correct": true },
            { "text": "Декоративний елемент", "correct": false },
            { "text": "Покращення паропроникності", "correct": false },
            { "text": "Захист від впливу сонячних променів", "correct": false }
        ],
        "explanation": "Основне призначення дюбелів — закріплення плит утеплювача до основи, що забезпечує надійне кріплення панелей."
    },
    {
        "text": "Чому не рекомендується виконувати монтаж фасадних панелей при температурі нижче +5°C?",
        "answers": [
            { "text": "Клей-піна втрачає свої властивості", "correct": true },
            { "text": "Плитка може тріснути", "correct": false },
            { "text": "Утеплювач деформується", "correct": false },
            { "text": "Волога не встигає випаровуватися", "correct": false }
        ],
        "explanation": "При температурі нижче +5°C клей-піна втрачає свої властивості, що може призвести до недостатньої адгезії та погіршення якості монтажу."
    },
    {
        "text": "З чого складається термопанель?",
        "answers": [
            { "text": "Утеплювач та оздоблюваний шар", "correct": true },
            { "text": "Тільки утеплювач", "correct": false },
            { "text": "Тільки декоративне покриття", "correct": false },
            { "text": "Бетон та металевий каркас", "correct": false }
        ],
        "explanation": "Термопанель складається з утеплювача та оздоблюваного шару, що забезпечує теплоізоляцію та естетичний вигляд."
    },
    {
        "text": "Які види утеплювача існують?",
        "answers": [
            { "text": "Екструдований пінополістирол (XSP)", "correct": false },
            { "text": "Спінений пінопласт", "correct": false },
            { "text": "Мінеральна вата", "correct": false },
            { "text": "Спінений пінопласт та екструдований пінополістирол (XSP)", "correct": true }
        ],
        "explanation": "Основні види утеплювачів – екструдований пінополістирол (XSP) та спінений пінопласт."
    },
    {
        "text": "Чи можна використовувати XSP на дерев’яний будинок?",
        "answers": [
            { "text": "Так", "correct": false },
            { "text": "Ні", "correct": true }
        ],
        "explanation": "XSP не рекомендується для використання на дерев’яних будинках через низьку паропроникність."
    },
    {
        "text": "Який колір має XSP?",
        "answers": [
            { "text": "Білий", "correct": false },
            { "text": "Синій", "correct": true },
            { "text": "Графіт", "correct": false }
        ],
        "explanation": "XSP зазвичай має синій колір, що є його відмінною ознакою."
    },
    {
        "text": "Які існують види плитки на термопанелях?",
        "answers": [
            { "text": "Керамогранітна", "correct": false },
            { "text": "Керамічна", "correct": false },
            { "text": "Клінкерна", "correct": false },
            { "text": "Бетонна", "correct": false },
            { "text": "Всі варіанти відповідей", "correct": true }
        ],
        "explanation": "На термопанелях можуть використовуватися різні види плитки: керамогранітна, керамічна, клінкерна та бетонна."
    },
    {
        "text": "Чи можна замовити кути на 200мм-250мм утеплювачу?",
        "answers": [
            { "text": "Так", "correct": false },
            { "text": "Ні", "correct": true }
        ],
        "explanation": "Замовити кути для утеплювача товщиною 200-250мм не можна."
    },
    {
        "text": "Як називається процес затирання швів?",
        "answers": [
            { "text": "Втирка", "correct": false },
            { "text": "Закладання", "correct": false },
            { "text": "Фугування", "correct": true },
            { "text": "Всі відповіді вірні", "correct": false }
        ],
        "explanation": "Фугування – це процес затирання швів для герметизації та естетичного вигляду."
    },
    {
        "text": "Який утеплювач краще використовувати для фундаменту (цоколь) та укосів?",
        "answers": [
            { "text": "Екструдований пінополістирол (XSP)", "correct": false },
            { "text": "Спінений пінопласт білий", "correct": false },
            { "text": "Такий же як і на термопанелях", "correct": false },
            { "text": "XSP або спінений пінопласт", "correct": true }
        ],
        "explanation": "Для фундаменту та укосів найкраще підходить XSP або спінений пінопласт."
    },
    {
        "text": "Де взяти прайс термопанелей?",
        "answers": [
            { "text": "У постачальника", "correct": false },
            { "text": "На сайті", "correct": false },
            { "text": "У бухгалтера ППФ", "correct": false },
            { "text": "У постачальника або знайти на сайті компанії", "correct": true }
        ],
        "explanation": "Прайс на термопанелі можна отримати у постачальника або знайти на сайті компанії."
    },
    {
        "text": "Скільки використовується фуги на м2?",
        "answers": [
            { "text": "1,8 кг", "correct": false },
            { "text": "2,9 кг", "correct": false },
            { "text": "2,5 кг", "correct": true },
            { "text": "3,2 кг", "correct": false }
        ],
        "explanation": "На 1 м² поверхні зазвичай використовується приблизно 2,5 кг фуги."
    }
];

// Функция для случайного выбора 12 вопросов
function getRandomQuestions() {
    const shuffledQuestions = shuffleArray([...questions]);
    return shuffledQuestions.slice(0, 12); // Возвращаем только первые 12 вопросов
}

// Перемешиваем ответы
function shuffleArray(array) {
    return array.sort(() => Math.random() - 0.5);
}

let currentQuestionIndex = 0;
let userAnswers = new Array(12).fill(null); // Обновляем размер массива под 12 вопросов

// Получаем случайные 12 вопросов
const selectedQuestions = getRandomQuestions();

// Перемешиваем ответы для всех вопросов
selectedQuestions.forEach(question => {
    question.shuffledAnswers = shuffleArray([...question.answers]);
});

const questionText = document.getElementById("question-text");
const answersContainer = document.querySelector(".answers");
const progressItems = document.querySelectorAll(".progress-item");

// Загрузка вопроса
function loadQuestion() {
    let question = selectedQuestions[currentQuestionIndex];
    if (!question) return;

    const explanationContainer = document.getElementById("explanation-container");
    explanationContainer.style.display = "none"; // Скрываем блок с объяснением

    questionText.textContent = `${currentQuestionIndex + 1}. ${question.text}`;
    answersContainer.innerHTML = ""; // Очищаем контейнер с ответами

    let shuffledCurrentAnswers = question.shuffledAnswers;

    shuffledCurrentAnswers.forEach((answer, index) => {
        const label = document.createElement("label");
        label.classList.add("answer");

        const input = document.createElement("input");
        input.type = "radio";
        input.name = `answer-${currentQuestionIndex}`; // Уникальное имя для каждого вопроса
        input.value = index;
        input.dataset.correct = answer.correct; // Сохраняем правильность ответа

        if (userAnswers[currentQuestionIndex] === index) {
            input.checked = true;
            input.disabled = true; // Блокируем радиокнопку
        }

        input.addEventListener("change", () => {
            if (userAnswers[currentQuestionIndex] === null) {
                userAnswers[currentQuestionIndex] = index;
                applyAnswerStyles(currentQuestionIndex);
                updateProgress();

                const answerInputs = document.querySelectorAll(`input[name="answer-${currentQuestionIndex}"]`);
                answerInputs.forEach(input => {
                    input.disabled = true; // Блокируем радиокнопки
                });
            }
        });

        label.appendChild(input);
        label.appendChild(document.createTextNode(answer.text));

        answersContainer.appendChild(label);
    });

    applyAnswerStyles(currentQuestionIndex);
    disablePreviousQuestions();
    updateProgress();
}

function disablePreviousQuestions() {
    selectedQuestions.forEach((question, index) => {
        if (userAnswers[index] !== null) {
            const answerInputs = document.querySelectorAll(`input[name="answer-${index}"]`);
            answerInputs.forEach(input => {
                input.disabled = true;
            });
        }
    });
}

function applyAnswerStyles(questionIndex) {
    const question = selectedQuestions[questionIndex];
    const correctIndex = question.shuffledAnswers.findIndex(answer => answer.correct);
    const answerInputs = document.querySelectorAll(`input[name="answer-${questionIndex}"]`);
    const explanationContainer = document.getElementById("explanation-container");
    const explanationText = document.getElementById("explanation-text");

    answerInputs.forEach((input, index) => {
        input.classList.remove("correct", "incorrect");

        if (userAnswers[questionIndex] !== null) {
            const isCorrect = input.dataset.correct === "true";
            if (input.checked) {
                input.classList.add(isCorrect ? "correct" : "incorrect");

                if (isCorrect) {
                    explanationText.textContent = question.explanation;
                } else {
                    explanationText.textContent = "Неправильна відповідь. " + question.explanation;
                }

                explanationContainer.style.display = "block";
            }
        }
    });
}

function updateProgress() {
    progressItems.forEach((item, index) => {
        const isAnswered = userAnswers[index] !== null;
        const isCorrect = isAnswered && selectedQuestions[index]?.shuffledAnswers[userAnswers[index]]?.correct;

        item.classList.remove("active", "correct", "incorrect");
        item.style.height = '10px';

        if (index === currentQuestionIndex) {
            item.classList.add("active");
            item.style.height = '15px';
        }

        if (isAnswered) {
            if (isCorrect) {
                item.classList.add("correct");
            } else {
                item.classList.add("incorrect");
            }
        }
    });
}

loadQuestion();

document.getElementById("prev").addEventListener("click", () => {
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        loadQuestion();
    }
});

document.getElementById("next").addEventListener("click", () => {
    if (currentQuestionIndex < selectedQuestions.length - 1) {
        currentQuestionIndex++;
        loadQuestion();
    } else {
        finishTest(); // Завершаем тест, если это последний вопрос
    }
});

// Функция для завершения теста
function finishTest() {
    let correctAnswers = 0;
    const answersData = selectedQuestions.map((q, i) => {
        const correctAnswerIndex = q.shuffledAnswers.findIndex(answer => answer.correct);
        const userAnswer = userAnswers[i];

        // Подсчитываем правильные и неправильные ответы для каждого вопроса
        const correctAnswersCount = userAnswer === correctAnswerIndex ? 1 : 0;
        const incorrectAnswersCount = userAnswer !== correctAnswerIndex ? 1 : 0;
        
        // Подсчитываем общее количество правильных ответов
        correctAnswers += correctAnswersCount;

        // Добавляем данные по каждому вопросу
        return {
            question: q.text,
            correctAnswers: correctAnswersCount,
            incorrectAnswers: incorrectAnswersCount,
            totalAnswers: q.shuffledAnswers.length
        };
    });

    // Сохраняем общую статистику
    const totalQuestions = selectedQuestions.length;
    const knowledgePercent = (correctAnswers / totalQuestions) * 100;

    // Сохраняем статистику в localStorage
    localStorage.setItem('answersData', JSON.stringify(answersData));
    localStorage.setItem('totalCorrectAnswers', correctAnswers);
    localStorage.setItem('totalQuestions', totalQuestions);
    localStorage.setItem('knowledgePercent', knowledgePercent);

    // Переходим на страницу статистики
    window.location.href = 'statistic.html'; // Переход на страницу статистики
}



document.getElementById("refresh").addEventListener("click", () => {
    const newQuestions = getRandomQuestions();
    selectedQuestions.length = 0;
    selectedQuestions.push(...newQuestions);

    selectedQuestions.forEach(question => {
        question.shuffledAnswers = shuffleArray([...question.answers]);
    });

    currentQuestionIndex = 0;
    userAnswers = new Array(12).fill(null);
    loadQuestion();
});

// Функция для сохранения статистики ответа
function saveAnswerStatistics(question, isCorrect) {
    // Получаем текущие данные из localStorage
    const currentData = JSON.parse(localStorage.getItem("answersData")) || [];

    // Ищем, есть ли уже запись для этого вопроса
    const existingQuestion = currentData.find(data => data.question === question);

    if (existingQuestion) {
        // Если вопрос уже есть в статистике, обновляем данные
        existingQuestion.totalAttempts += 1;
        if (isCorrect) {
            existingQuestion.correctAnswers += 1;
        } else {
            existingQuestion.incorrectAnswers += 1;
        }
    } else {
        // Если вопроса нет в статистике, добавляем новый
        currentData.push({
            question: question,
            correctAnswers: isCorrect ? 1 : 0,
            incorrectAnswers: isCorrect ? 0 : 1,
            totalAttempts: 1
        });
    }

    // Сохраняем обновленные данные в localStorage
    localStorage.setItem("answersData", JSON.stringify(currentData));
}

// Функция завершения теста
function finishTest() {
    let correctAnswers = 0;
    const answersData = selectedQuestions.map((q, i) => {
        const correctAnswerIndex = q.shuffledAnswers.findIndex(answer => answer.correct);
        const userAnswer = userAnswers[i];

        const isCorrect = userAnswer === correctAnswerIndex;
        if (isCorrect) correctAnswers++;

        // Сохраняем статистику в localStorage
        saveAnswerStatistics(q.text, isCorrect);

        return {
            question: q.text,
            correctAnswers: isCorrect ? 1 : 0,
            incorrectAnswers: isCorrect ? 0 : 1,
            totalAttempts: 1
        };
    });

    // Записываем общий процент знаний
    const totalQuestions = selectedQuestions.length;
    const knowledgePercent = Math.round((correctAnswers / totalQuestions) * 100);

    localStorage.setItem('totalCorrectAnswers', correctAnswers);
    localStorage.setItem('totalQuestions', totalQuestions);
    localStorage.setItem('knowledgePercent', knowledgePercent);

    // Переход на страницу статистики
    window.location.href = 'statistic.html';
}

// Очищаем только текущие ответы пользователя, но не статистику
document.getElementById("refresh").addEventListener("click", () => {
    currentQuestionIndex = 0;
    userAnswers = new Array(12).fill(null);
    loadQuestion();
});

</script>

<script src="telegram.js"></script>
    
    
    
</body>
</html>
