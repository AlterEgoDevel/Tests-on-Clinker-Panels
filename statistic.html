<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –ö–û–ú–ü–ê–ù–Ü–Ø –ü–ü–§</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-top">
            <div class="logo-container">
                <img src="img/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo">
                <div class="logo-text">
                    <div class="company-name">–ö–û–ú–ü–ê–ù–Ü–Ø –ü–ü–§</div>
                    <div class="company-desc">–ü–û–ö–†–Ü–í–õ–Ø & –§–ê–°–ê–î</div>
                </div>
            </div>
            <div class="header-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç—ñ–≤</div>
        </div>
        <div class="header-bottom">
            <nav>
                <a href="index.html">–¢–µ—Å—Ç</a>
                <a href="statistic.html" class="active">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
            </nav>
            <button id="clear-statistics">–û—á–∏—Å—Ç–∏—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
        </div>
    </header>
    <div class="statistics-container">
        <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è</h2>
        <table>
            <thead>
                <tr>
                    <th onclick="sortTable(0)">üìù</th>
                    <th onclick="sortTable(1)">üîÑ</th>
                    <th onclick="sortTable(2)">‚úÖ</th>
                    <th onclick="sortTable(3)">‚ùå</th>
                    <th onclick="sortTable(4)">üìä</th>
                </tr>
            </thead>
            <tbody id="statistics-body"></tbody>
        </table>
    </div>
    <script>
        let sortDirection = {};
        function sortTable(n) {
            const table = document.querySelector("table tbody");
            const rows = Array.from(table.rows);
            sortDirection[n] = !sortDirection[n];
            const sortedRows = rows.sort((a, b) => {
                const aValue = isNaN(parseFloat(a.cells[n].innerText)) ? a.cells[n].innerText : parseFloat(a.cells[n].innerText);
                const bValue = isNaN(parseFloat(b.cells[n].innerText)) ? b.cells[n].innerText : parseFloat(b.cells[n].innerText);
                return sortDirection[n] ? bValue - aValue : aValue - bValue;
            });
            table.innerHTML = "";
            sortedRows.forEach(row => table.appendChild(row));
        }
        document.addEventListener("DOMContentLoaded", () => {
            const statisticsBody = document.getElementById("statistics-body");
            const clearButton = document.getElementById("clear-statistics");
            let answersData = JSON.parse(localStorage.getItem("answersData")) || [];
            if (answersData.length === 0) {
                statisticsBody.innerHTML = "<tr><td colspan='5'>–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>";
                return;
            }
            answersData.forEach(({ question, correctAnswers, incorrectAnswers, totalAttempts }) => {
                const correctPercentage = ((correctAnswers / totalAttempts) * 100).toFixed(1) + "%";
                const percentClass = correctPercentage.replace('%', '') > 50 ? "correct" : "incorrect";
                const row = `<tr>
                    <td>${question}</td>
                    <td>${totalAttempts}</td>
                    <td class="correct">${correctAnswers}</td>
                    <td class="incorrect">${incorrectAnswers}</td>
                    <td class="percent ${percentClass}">${correctPercentage}</td>
                </tr>`;
                statisticsBody.innerHTML += row;
            });
            clearButton.addEventListener("click", () => {
                localStorage.removeItem("answersData");
                localStorage.removeItem("totalCorrectAnswers");
                localStorage.removeItem("totalQuestions");
                localStorage.removeItem("knowledgePercent");
                location.reload();
            });
        });
    </script>
    <script src="telegram.js"></script>
</body>
</html>
